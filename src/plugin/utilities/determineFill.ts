// Determine a nodes fills
export function determineFill(fills) {
  let fillValues = [];

  fills.forEach((fill) => {
    if (fill.type === "SOLID") {
      let rgbObj = convertColor(fill.color);
      fillValues.push(RGBToHex(rgbObj["r"], rgbObj["g"], rgbObj["b"]));
    } else {
      //  do nothing for gradients, images or vide
    }
  });

  return fillValues[0];
}

// Utility functions for color conversion.
export const convertColor = (color) => {
  const colorObj = color;
  const figmaColor = {};

  Object.entries(colorObj).forEach((cf) => {
    const [key, value] = cf;

    if (["r", "g", "b"].includes(key)) {
      figmaColor[key] = (255 * (value as number)).toFixed(0);
    }
    if (key === "a") {
      figmaColor[key] = value;
    }
  });
  return figmaColor;
};

export function RGBToHex(r, g, b) {
  r = Number(r).toString(16);
  g = Number(g).toString(16);
  b = Number(b).toString(16);

  if (r.length == 1) r = "0" + r;
  if (g.length == 1) g = "0" + g;
  if (b.length == 1) b = "0" + b;

  return "#" + r + g + b;
}
